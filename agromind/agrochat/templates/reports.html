{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reports - AgroChat Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Lato:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
:root {
  --primary-green: #28a745;
  --dark-green: #155724;
  --background-light: #f8f9fa;
  --card-bg: #ffffff;
  --border-color: #e2e8f0;
  --text-color: #333333;
  --muted-text: #6c757d;
}

body { font-family: 'Inter', sans-serif; background-color: var(--background-light); color: var(--text-color); margin:0; height: 100vh; overflow: hidden; }
.dashboard-container { display: flex; height: 100vh; }

/* Sidebar */
.sidebar { width: 280px; background-color: var(--card-bg); padding: 2rem 1rem; box-shadow: 0 4px 12px rgba(0,0,0,0.05); display:flex; flex-direction: column; justify-content: space-between; height: 100vh; overflow-y: auto; }
.sidebar-header h2 { color: var(--dark-green); font-weight: 700; font-size: 1.5rem; }
.nav-links .nav-link { display:flex; align-items:center; padding:0.75rem 1rem; margin-bottom:0.5rem; color: var(--muted-text); border-radius:10px; text-decoration:none; font-weight:500; transition: all 0.3s; }
.nav-links .nav-link i { margin-right:0.75rem; font-size:1.2rem; }
.nav-links .nav-link:hover, .nav-links .nav-link.active { background-color: var(--primary-green); color:#fff; }

/* Main Content */
.main-content { flex-grow:1; padding:2rem; display:flex; flex-direction:column; height: 100vh; overflow: hidden; }
.header h1 { font-weight:700; color: var(--dark-green); margin-bottom:0.25rem; }
.header p { font-size:0.95rem; color: var(--muted-text); margin-bottom:1rem; }

/* Table container */
.table-container { background-color: var(--card-bg); padding:1rem; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05); overflow:auto; flex-grow:1; }
table { width:100%; border-collapse: collapse; min-width: 700px; }
th, td { padding:0.75rem 1rem; text-align:left; border-bottom:1px solid var(--border-color); }
th { background-color: #f1f5f9; font-weight:600; position: sticky; top: 0; z-index: 2; }
tr:hover { background-color: #f8f9fa; }

/* Scrollbar styling */
.table-container::-webkit-scrollbar {
    width: 8px;
}
.table-container::-webkit-scrollbar-thumb {
    background-color: rgba(0,0,0,0.2);
    border-radius: 4px;
}
.table-container::-webkit-scrollbar-track {
    background-color: transparent;
}

@media(max-width:992px){ .main-content { padding:1.5rem; } .sidebar { width:220px; } }
</style>
</head>
<body>

<div class="dashboard-container">

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header"><h2>AgroChat ðŸŒ±</h2></div>
    <div class="nav-links my-4">
      <a href="{% url 'home' %}" class="nav-link"><i class="fas fa-home"></i> Home</a>
      <a href="{% url 'equipment' %}" class="nav-link"><i class="fas fa-tools"></i> Equipment Status</a>
      <a href="{% url 'chatbot' %}" class="nav-link"><i class="fas fa-robot"></i> Chatbot</a>
      <a href="{% url 'reports' %}" class="nav-link active"><i class="fas fa-chart-line"></i> Reports</a>
      <hr>
      <a href="{% url 'profile' %}" class="nav-link"><i class="fas fa-user-circle"></i> Profile</a>
      <a href="{% url 'settings' %}" class="nav-link"><i class="fas fa-cog"></i> Settings</a>
      <a href="{% url 'logout' %}" class="btn btn-outline-danger w-100 mt-3"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="header">
      <h1>Sensor Reports</h1>
      <p class="text-muted">Showing the latest 50 sensor readings from your farm.</p>
    </div>

    <div class="table-container">
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Timestamp</th>
            <th>Soil Moisture (%)</th>
            <th>Temperature (Â°C)</th>
            <th>Humidity (%)</th>
            <th>pH</th>
          </tr>
        </thead>
        <tbody>
          {% for reading in sensor_data %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ reading.timestamp|date:"Y-m-d H:i:s" }}</td>
            <td>{{ reading.soil_moisture|default:"N/A" }}</td>
            <td>{{ reading.temperature|default:"N/A" }}</td>
            <td>{{ reading.humidity|default:"N/A" }}</td>
            <td>{{ reading.ph|default:"N/A" }}</td>
          </tr>
          {% empty %}
          <tr><td colspan="6" class="text-center text-muted">No data available.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
