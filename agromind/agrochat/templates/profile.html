{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profile - AgroChat Dashboard</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Lato:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<style>
:root {
  --primary-green: #28a745;
  --dark-green: #155724;
  --background-light: #f8f9fa;
  --card-bg: #ffffff;
  --text-color: #333333;
  --muted-text: #6c757d;
}
body { font-family: 'Inter', sans-serif; background-color: var(--background-light); color: var(--text-color); margin:0; padding:0; }
.dashboard-container { display: flex; min-height: 100vh; }
.sidebar { width: 280px; background-color: var(--card-bg); padding: 2rem; box-shadow: 0 4px 12px rgba(0,0,0,0.05); display: flex; flex-direction: column; justify-content: space-between; position: fixed; height: 100%; left: 0; top: 0; z-index:1000; transition: transform 0.3s ease; }
.sidebar.collapsed { transform: translateX(-100%); }
.sidebar-header h2 { color: var(--dark-green); font-weight: 700; font-size: 1.5rem; }
.nav-links .nav-link { display: flex; align-items: center; padding: 0.75rem 1rem; margin-bottom: 0.5rem; color: var(--muted-text); border-radius: 8px; text-decoration: none; transition: 0.3s; }
.nav-links .nav-link:hover, .nav-links .nav-link.active { background-color: var(--primary-green); color:#fff; }
.nav-links .nav-link i { margin-right:0.75rem; font-size:1.2rem; }
.main-content { flex-grow: 1; padding: 2rem; margin-left:280px; display:flex; flex-direction:column; transition:margin-left 0.3s; }
.top-navbar { background-color:#fff; padding:0.5rem 2rem; box-shadow:0 2px 8px rgba(0,0,0,0.05); display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem; border-radius:12px; }
.menu-btn { font-size:1.5rem; cursor:pointer; display:none; }
.top-navbar a { color: var(--text-color); text-decoration:none; margin-left:1rem; }
.content-card { background-color:var(--card-bg); padding:2rem; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05); margin-bottom:2rem; }
.content-card h3 { color: var(--dark-green); margin-bottom:1rem; }
footer { background-color: var(--card-bg); padding:1.5rem 2rem; text-align:center; box-shadow:0 -2px 8px rgba(0,0,0,0.05); width:100%; margin-top:auto; color: var(--muted-text); border-radius: 12px 12px 0 0; }
@media(max-width:992px){ .sidebar { transform:translateX(-100%); } .sidebar.collapsed { transform:translateX(0); } .main-content{margin-left:0;} .menu-btn{display:block;} }
</style>
</head>
<body>

<div class="dashboard-container">

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header"><h2>AgroChat ðŸŒ±</h2></div>
    <div class="nav-links my-4">
      <a href="{% url 'home' %}" class="nav-link"><i class="fas fa-home"></i> Home</a>
      <a href="{% url 'equipment' %}" class="nav-link"><i class="fas fa-tools"></i> Equipment Status</a>
      <a href="{% url 'chatbot' %}" class="nav-link"><i class="fas fa-robot"></i> Chatbot</a>
      <a href="{% url 'reports' %}" class="nav-link"><i class="fas fa-chart-line"></i> Reports</a>
      <hr>
      <a href="{% url 'profile' %}" class="nav-link active"><i class="fas fa-user-circle"></i> Profile</a>
      <a href="{% url 'settings' %}" class="nav-link"><i class="fas fa-cog"></i> Settings</a>
      <a href="{% url 'logout' %}" class="btn btn-outline-danger w-100 mt-3"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="top-navbar">
      <span class="menu-btn" id="menu-btn"><i class="fas fa-bars"></i></span>
      <h4>Profile</h4>
      <div>
        <a href="#"><i class="fas fa-bell"></i></a>
        <a href="#"><i class="fas fa-user-circle"></i></a>
      </div>
    </div>

    <div class="content-card">
      <h3>User Profile</h3>
      <form method="POST">
        {% csrf_token %}
        <div class="mb-3">
          <label for="username" class="form-label">Username</label>
          <input type="text" class="form-control" id="username" name="username" value="{{ user.username }}">
        </div>
        <div class="mb-3">
          <label for="email" class="form-label">Email address</label>
          <input type="email" class="form-control" id="email" name="email" value="{{ user.email }}">
        </div>
        <div class="mb-3">
          <label for="first_name" class="form-label">First Name</label>
          <input type="text" class="form-control" id="first_name" name="first_name" value="{{ user.first_name }}">
        </div>
        <div class="mb-3">
          <label for="last_name" class="form-label">Last Name</label>
          <input type="text" class="form-control" id="last_name" name="last_name" value="{{ user.last_name }}">
        </div>
        <button type="submit" class="btn btn-success">Update Profile</button>
      </form>
    </div>

    <footer>
      &copy; 2025 AgroChat. All rights reserved.
    </footer>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
const sidebar = document.getElementById('sidebar');
const menuBtn = document.getElementById('menu-btn');
menuBtn.addEventListener('click', ()=>{ sidebar.classList.toggle('collapsed'); });
</script>
</body>
</html>
